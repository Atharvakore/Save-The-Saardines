@startuml
'General
  enum Direction{
    D0,
    D60,
    D120,
    D180,
    D240,
    D300
  }
  enum GarbageType{
    OIL,
    PLASTIC,
    CHEMICALS
  }

  enum ShipStatus{
  AVAILABLE,
  ON_THE_WAY,
  REFILLING
  }
   class Vec2D{
    posX: Int,
    posY: Int
  }

  interface Validator {
    ' Throws an exception if the object is not valid
    validateState(Object) : void
  }

class Scenario{
        ships: List<Ship>
        events:List<Event>
        garbage:List<Garbage>
}

class Garbage {
id:Int,
amount:Int,
type:GarbageType,
tile:Tile
drift()
}

Corporation --|> Validator
  class Corporation {
    id:Int,
    name:String,
    acceptedGarbageTypes: List<GarbageType>
    ownedHarbors : List<Harbor>
    ownedShips: List<Ship>

  }

  class Harbor {
           owner:Corporation
           refuelShip(Ship)
           takeGarbage(Ship)
  }

  class Map {
    tiles: List<Tile>
    tileIndex: Map<Vec2D, Tile>

    getTileById(Int):Tile
    addTile(Tile):void
    getTileByPosition(Vec2D):Tile
  }


    Simulation --|> Validator
    class Simulation {
        corporations: List<Corporation>
        scenario: Scenario
        tick: Int
        maxTick: Int
        map: Map

        start()
        tick()
    }
    package Event{
    Event --|> Validator
    abstract class Event {
    id:Int,
    act(Simulation)
    }
     Pirate_Attack --|> Event
    class Pirate_Attack {
    ShipID:Int,
    }
    Local_Event --|> Event
    abstract class Local_Event {
    location : Tile ,
     radius:Int,
    }
    Strom --|> Local_Event
    class Strom {
    speed: Int,
    direction: Direction
    }
    OilSpill --|> Local_Event
    class OilSpill {
    amount: Int,
    }
    Restriction --|> Local_Event
    class Restriction {
    duration: Int,
    }
    }

package Parser{
    class GenericJSONParser{
    ' Return a Kotlin object
    parse(String json):Object
    }

    class MapJSONParser{
    parseMap(String json):Tile
    }

    class CorporationJSONParser{
     parseCorporation(corporation:String):Corporation
     parseShip(ship:String):Ship
     parseHarbors(harbors:String):Harbor
    }

        class ScenarioJSONParser{
          parseGarbage(garbage:String):Garbage
        }
        GenericJSONParser --> MapJSONParser
        GenericJSONParser --> CorporationJSONParser
        GenericJSONParser --> ScenarioJSONParser
        }
'Tiles

package Tile{
Tile --|> Validator
abstract class Tile{
    id:Int,
    pos:Vec2D,
    adjacentTiles:Tile[6],
    shipTraversable:Boolean,
}

Land --|> Tile
Water --|> Tile

Shore --|> Tile
DeepOcean --|> Tile
ShallowOcean --|> Tile

class Current{
    speed: Int,
    direction: Direction,
    intensity: Int
}
class Land{
}
class Shore{
harbor: Harbor?
}
class ShallowOcean{}
class DeepOcean{
current: Current?
}

}
'Ships
package Ship{
Ship --|> Validator
abstract class Ship {
    id:Int,
    name: String,
    owner: Corporation,
    pos: Tile,
    dir: Direction,
    maxVelocity: Int,
    acceleration: Int,
    fuelCapacity: Int,
    fuelConsumption: Int,
    visibleRange: Int,

    getGarbageInFieldOfView(Tile): List<Garbage>
    navigateTo(Tile)
    refuel()
}

ScoutingShip --|> Ship
CoordinatingShip --|> Ship
CollectingShip --|> Ship

class ScoutingShip{
}
class CoordinatingShip{
}
class CollectingShip{
garbageType: GarbageType
garbageCapacity: Int,
garbageLoad: Int,
}
class Dijkstra{
  computeDistance(Tile, Tile): Int
}
}
package Logger{
class Logger{

}
}
@enduml