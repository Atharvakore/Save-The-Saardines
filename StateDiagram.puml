@startuml

[*] --> MapValidated: parseMapJSON()[parseSuccessful]
[*] --> [*] : parseMapJSON()[parseFailed]

MapValidated --> CorporationValidated : parseCorporationsJSON()[parseSuccessful]
MapValidated --> [*] : parseCorporationsJSON()[parseFailed]

CorporationValidated --> ScenarioValidated : parseScenarioJSON()[parseSuccessful]
CorporationValidated --> [*] : parseScenarioJSON()[parseFailed]

ScenarioValidated--> SimulationStarted : startSimulation()

SimulationStarted --> TickStarted : tick()

TickStarted --> CorporationPresent : checkCorporations()
CorporationPresent --> ShipsMoved : moveShips() [corporationsPresent]
ShipsMoved --> GarbageCollected : collectGarbage()
GarbageCollected --> CorporationsCorporated : corporate()
CorporationsCorporated --> ShipsUnloaded : unloadShips()
ShipsUnloaded --> ShipsRefueled : refuelShips()
ShipsRefueled --> CorporationPresent : checkCorporations()[True]
CorporationPresent --> GarbageDrifted : driftGarbage() [corporationsAbsent]
GarbageDrifted --> ShipsDrifted : driftShips()
ShipsDrifted --> EventsProcessed : processEVents()
EventsProcessed --> TickStarted : [currentTick!=eventTick]
EventsProcessed --> EventsStarted : [currentTick=eventTick]
EventsStarted --> TickStarted : []
TickStarted --> [*] : [CurrentTick=max_ticks]

@enduml

